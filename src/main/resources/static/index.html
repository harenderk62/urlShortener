<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>URL Shortener</title>
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
</head>
<body>
<div id="root"></div>
<script>
const e = React.createElement;

function App() {
  const [originalUrl, setOriginalUrl] = React.useState('');
  const [alias, setAlias] = React.useState('');
  const [engine, setEngine] = React.useState('BASE64');
  const [result, setResult] = React.useState('');

  const submit = async () => {
    const response = await fetch('/api/shorten', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ originalUrl, alias, type: engine })
    });
    const data = await response.json();
    if (response.ok) {
      setResult(data.shortUrl);
    } else {
      setResult(data.message || 'Error');
    }
  };

  return e('div', null,
    e('h1', null, 'URL Shortener'),
    e('input', {
      placeholder: 'Original URL',
      value: originalUrl,
      onChange: e => setOriginalUrl(e.target.value)
    }),
    e('input', {
      placeholder: 'Alias (optional)',
      value: alias,
      onChange: e => setAlias(e.target.value)
    }),
    e('select', {
      value: engine,
      onChange: e => setEngine(e.target.value)
    },
      e('option', { value: 'BASE64' }, 'BASE64'),
      e('option', { value: 'MD5' }, 'MD5'),
      e('option', { value: 'UUID' }, 'UUID')
    ),
    e('button', { onClick: submit }, 'Shorten'),
    result && e('p', null, 'Result: ', e('a', { href: result }, result)),
    e('p', null, e('a', { href: '/dashboard.html' }, 'Admin Dashboard'))
  );
}

ReactDOM.render(e(App), document.getElementById('root'));
</script>
</body>
</html>