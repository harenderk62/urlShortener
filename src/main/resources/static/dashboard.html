<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Analytics Dashboard</title>
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
</head>
<body>
<div id="root"></div>
<script>
const e = React.createElement;

function Dashboard() {
  const [rows, setRows] = React.useState([]);

  React.useEffect(() => {
    fetch('/api/analytics', { credentials: 'include' })
      .then(res => res.json())
      .then(setRows);
  }, []);

  return e('div', null,
    e('h1', null, 'Analytics'),
    e('table', { border: 1 },
      e('thead', null,
        e('tr', null,
          e('th', null, 'ID'),
          e('th', null, 'Short'),
          e('th', null, 'Original'),
          e('th', null, 'Hits')
        )
      ),
      e('tbody', null,
        rows.map(r =>
          e('tr', { key: r.id },
            e('td', null, r.id),
            e('td', null, r.shortUrl),
            e('td', null, r.originalUrl),
            e('td', null, r.hitCount)
          )
        )
      )
    )
  );
}

ReactDOM.render(e(Dashboard), document.getElementById('root'));
</script>
</body>
</html>